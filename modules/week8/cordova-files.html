<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cordova File Plugin | MAD9022</title>
    <meta name="description" content="Cross-Platform App Development II">
    
    
    <link rel="preload" href="/mad9022-w19/assets/css/styles.41454ee1.css" as="style"><link rel="preload" href="/mad9022-w19/assets/js/app.41454ee1.js" as="script"><link rel="preload" href="/mad9022-w19/assets/js/108.68a584be.js" as="script"><link rel="prefetch" href="/mad9022-w19/assets/css/11.styles.d1d0bc23.css"><link rel="prefetch" href="/mad9022-w19/assets/css/2.styles.50c0c95d.css"><link rel="prefetch" href="/mad9022-w19/assets/css/3.styles.75a33a02.css"><link rel="prefetch" href="/mad9022-w19/assets/css/4.styles.9b186081.css"><link rel="prefetch" href="/mad9022-w19/assets/css/5.styles.d720d12b.css"><link rel="prefetch" href="/mad9022-w19/assets/js/1.f3ac51dd.js"><link rel="prefetch" href="/mad9022-w19/assets/js/10.bfaf831a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/100.5a2f07bf.js"><link rel="prefetch" href="/mad9022-w19/assets/js/101.20b99668.js"><link rel="prefetch" href="/mad9022-w19/assets/js/102.6b0b57d0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/103.d4d127f9.js"><link rel="prefetch" href="/mad9022-w19/assets/js/104.379f5752.js"><link rel="prefetch" href="/mad9022-w19/assets/js/105.dc5026da.js"><link rel="prefetch" href="/mad9022-w19/assets/js/106.f2f81565.js"><link rel="prefetch" href="/mad9022-w19/assets/js/107.9ef2060c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/109.fc887459.js"><link rel="prefetch" href="/mad9022-w19/assets/js/11.d1d0bc23.js"><link rel="prefetch" href="/mad9022-w19/assets/js/110.9888ca90.js"><link rel="prefetch" href="/mad9022-w19/assets/js/111.529b5195.js"><link rel="prefetch" href="/mad9022-w19/assets/js/112.c0e65e52.js"><link rel="prefetch" href="/mad9022-w19/assets/js/113.1b24d100.js"><link rel="prefetch" href="/mad9022-w19/assets/js/114.450077e3.js"><link rel="prefetch" href="/mad9022-w19/assets/js/115.0962e7b3.js"><link rel="prefetch" href="/mad9022-w19/assets/js/116.80343209.js"><link rel="prefetch" href="/mad9022-w19/assets/js/117.28d20708.js"><link rel="prefetch" href="/mad9022-w19/assets/js/118.e74c0443.js"><link rel="prefetch" href="/mad9022-w19/assets/js/119.40016a1d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/12.ab76b0bd.js"><link rel="prefetch" href="/mad9022-w19/assets/js/120.842cf0bd.js"><link rel="prefetch" href="/mad9022-w19/assets/js/121.6fa593a5.js"><link rel="prefetch" href="/mad9022-w19/assets/js/122.39055a61.js"><link rel="prefetch" href="/mad9022-w19/assets/js/13.fa2cca47.js"><link rel="prefetch" href="/mad9022-w19/assets/js/14.11d57462.js"><link rel="prefetch" href="/mad9022-w19/assets/js/15.7f7b62e1.js"><link rel="prefetch" href="/mad9022-w19/assets/js/16.1f434e79.js"><link rel="prefetch" href="/mad9022-w19/assets/js/17.341f564a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/18.b45827bb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/19.0fcd00e4.js"><link rel="prefetch" href="/mad9022-w19/assets/js/2.50c0c95d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/20.aedb17bc.js"><link rel="prefetch" href="/mad9022-w19/assets/js/21.d22dca94.js"><link rel="prefetch" href="/mad9022-w19/assets/js/22.4819435a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/23.6aae16b6.js"><link rel="prefetch" href="/mad9022-w19/assets/js/24.4873ca54.js"><link rel="prefetch" href="/mad9022-w19/assets/js/25.76a1627d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/26.bc4c279a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/27.eb1897ef.js"><link rel="prefetch" href="/mad9022-w19/assets/js/28.c0195e8a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/29.05b52044.js"><link rel="prefetch" href="/mad9022-w19/assets/js/3.75a33a02.js"><link rel="prefetch" href="/mad9022-w19/assets/js/30.edad0d75.js"><link rel="prefetch" href="/mad9022-w19/assets/js/31.39bcc518.js"><link rel="prefetch" href="/mad9022-w19/assets/js/32.e4f34273.js"><link rel="prefetch" href="/mad9022-w19/assets/js/33.fa19305b.js"><link rel="prefetch" href="/mad9022-w19/assets/js/34.ee009c6a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/35.4849b2d6.js"><link rel="prefetch" href="/mad9022-w19/assets/js/36.ce357d0d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/37.f41cd90d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/38.312b6743.js"><link rel="prefetch" href="/mad9022-w19/assets/js/39.9aa5c1ac.js"><link rel="prefetch" href="/mad9022-w19/assets/js/4.9b186081.js"><link rel="prefetch" href="/mad9022-w19/assets/js/40.830fc587.js"><link rel="prefetch" href="/mad9022-w19/assets/js/41.56bf3b7a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/42.73f8d4b1.js"><link rel="prefetch" href="/mad9022-w19/assets/js/43.98a6c1c8.js"><link rel="prefetch" href="/mad9022-w19/assets/js/44.3fb32089.js"><link rel="prefetch" href="/mad9022-w19/assets/js/45.e2172f70.js"><link rel="prefetch" href="/mad9022-w19/assets/js/46.a3014563.js"><link rel="prefetch" href="/mad9022-w19/assets/js/47.c0e20b50.js"><link rel="prefetch" href="/mad9022-w19/assets/js/48.51fe11b0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/49.30d655eb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/5.d720d12b.js"><link rel="prefetch" href="/mad9022-w19/assets/js/50.4ba7c331.js"><link rel="prefetch" href="/mad9022-w19/assets/js/51.3c1b266c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/52.1e4596e0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/53.1d3feae3.js"><link rel="prefetch" href="/mad9022-w19/assets/js/54.6b2f40cf.js"><link rel="prefetch" href="/mad9022-w19/assets/js/55.9c6bd9cb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/56.1082fd0e.js"><link rel="prefetch" href="/mad9022-w19/assets/js/57.cd051699.js"><link rel="prefetch" href="/mad9022-w19/assets/js/58.0959d73c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/59.96efe362.js"><link rel="prefetch" href="/mad9022-w19/assets/js/6.838d5a84.js"><link rel="prefetch" href="/mad9022-w19/assets/js/60.6bd0fd22.js"><link rel="prefetch" href="/mad9022-w19/assets/js/61.13a66fbb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/62.170d9996.js"><link rel="prefetch" href="/mad9022-w19/assets/js/63.881daa06.js"><link rel="prefetch" href="/mad9022-w19/assets/js/64.aab898a8.js"><link rel="prefetch" href="/mad9022-w19/assets/js/65.5664f45b.js"><link rel="prefetch" href="/mad9022-w19/assets/js/66.059a11d4.js"><link rel="prefetch" href="/mad9022-w19/assets/js/67.1f8b6d5a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/68.4f7da608.js"><link rel="prefetch" href="/mad9022-w19/assets/js/69.fbb52d02.js"><link rel="prefetch" href="/mad9022-w19/assets/js/7.43a1cfbb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/70.7fa3da3c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/71.795ceb35.js"><link rel="prefetch" href="/mad9022-w19/assets/js/72.1f6d56bf.js"><link rel="prefetch" href="/mad9022-w19/assets/js/73.0e0a654e.js"><link rel="prefetch" href="/mad9022-w19/assets/js/74.0e60e60a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/75.205be73d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/76.1ae1f030.js"><link rel="prefetch" href="/mad9022-w19/assets/js/77.e72c7226.js"><link rel="prefetch" href="/mad9022-w19/assets/js/78.0cb60cc8.js"><link rel="prefetch" href="/mad9022-w19/assets/js/79.37c81eb7.js"><link rel="prefetch" href="/mad9022-w19/assets/js/8.e0a990e7.js"><link rel="prefetch" href="/mad9022-w19/assets/js/80.cd013a30.js"><link rel="prefetch" href="/mad9022-w19/assets/js/81.7895e895.js"><link rel="prefetch" href="/mad9022-w19/assets/js/82.6a1e1da4.js"><link rel="prefetch" href="/mad9022-w19/assets/js/83.e9ff3b07.js"><link rel="prefetch" href="/mad9022-w19/assets/js/84.21b918c0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/85.b6427dea.js"><link rel="prefetch" href="/mad9022-w19/assets/js/86.f4c5c6f1.js"><link rel="prefetch" href="/mad9022-w19/assets/js/87.4f561d92.js"><link rel="prefetch" href="/mad9022-w19/assets/js/88.8d0daf32.js"><link rel="prefetch" href="/mad9022-w19/assets/js/89.890efde6.js"><link rel="prefetch" href="/mad9022-w19/assets/js/9.e9646124.js"><link rel="prefetch" href="/mad9022-w19/assets/js/90.928c223e.js"><link rel="prefetch" href="/mad9022-w19/assets/js/91.7fc7af62.js"><link rel="prefetch" href="/mad9022-w19/assets/js/92.f9849f8a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/93.213ee155.js"><link rel="prefetch" href="/mad9022-w19/assets/js/94.0b0dde70.js"><link rel="prefetch" href="/mad9022-w19/assets/js/95.e0261c96.js"><link rel="prefetch" href="/mad9022-w19/assets/js/96.008cf034.js"><link rel="prefetch" href="/mad9022-w19/assets/js/97.ca853c16.js"><link rel="prefetch" href="/mad9022-w19/assets/js/98.471bf6b2.js"><link rel="prefetch" href="/mad9022-w19/assets/js/99.aeb61123.js">
    <link rel="stylesheet" href="/mad9022-w19/assets/css/11.styles.d1d0bc23.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/2.styles.50c0c95d.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/3.styles.75a33a02.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/4.styles.9b186081.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/5.styles.d720d12b.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/styles.41454ee1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mad9022-w19/" class="home-link router-link-active"><!----> <span class="site-name">MAD9022</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mad9022-w19/overview/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/mad9022-w19/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/mad9022-w19/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mad9022-w19/overview/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/mad9022-w19/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/mad9022-w19/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>Introduction</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/mad9022-w19/overview/" class="sidebar-link">Overview</a></li><li><a href="/mad9022-w19/overview/course-section-information.html" class="sidebar-link">Course Section Information (CSI)</a></li><li><a href="/mad9022-w19/overview/contacts.html" class="sidebar-link">Contacts</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Content Modules</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Assignments</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="cordova-file-plugin"><a href="#cordova-file-plugin" aria-hidden="true" class="header-anchor">#</a> Cordova File Plugin</h1> <p>Details on how to use the Cordova file plugin to manage files and folders.</p> <p>The Cordova File plugin provides a bunch of properties that point to commonly used folders. This way you will have access to a common set of folder regardless of whether your App is running on iOS or Android.</p> <div class="language- extra-class"><pre class="language-text"><code>cordova.file.applicationStorageDirectory - where your app will put folders like `/Documents`. (read-only on iOS)
cordova.file.applicationDirectory - where your app is installed (read only on iOS)
cordova.file.cacheDirectory - where files are cached by your app. These are files that can be recreated. The OS may choose to delete these to free memory.
cordova.file.dataDirectory - private data storage for the app goes here
cordova.file.externalApplicationStorageDirectory - where an app can store files on an external SD card.
</code></pre></div><p><a href="https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html#file-system-layouts" target="_blank" rel="noopener noreferrer">Here is the reference for iOS and Android File System Layouts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="config-settings-for-file-storage"><a href="#config-settings-for-file-storage" aria-hidden="true" class="header-anchor">#</a> Config Settings for File Storage</h2> <p>On Android we need to add a preference setting to our <code>config.xml</code> file. For new apps you should add the following.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>AndroidPersistentFileLocation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Internal<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>If you are updating an older app from an old version of Android then you should instead use:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>AndroidPersistentFileLocation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Compatibility<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>or you will lose access to old stored files on Android. The iOS version of the Internal setting is:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>preference</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>iosPersistentFileLocation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Library<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="about-filesystems-and-paths"><a href="#about-filesystems-and-paths" aria-hidden="true" class="header-anchor">#</a> About Filesystems and Paths</h2> <p><strong>All browsers use forward slash as directory separator in a path.</strong></p> <p><strong>Each level of directory must be created one at a time.</strong></p> <p>The file plugin will sometimes take longer than the other plugins to be ready to use on Chrome. If you are going to use the file plugin at the start of your app then you should use an additional event listener to <code>deviceready</code> if you are using the <code>browser</code> platform.</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;filePluginIsReady&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;File plugin is ready&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This plugin will tell you when the filesystem and the plugin are ready.
** THIS EVENT IS ONLY FOR CHROME**</p> <p>If you are going to be using the file plugin shortly after the app has been started then you can check the value of the <code>window.isFilePluginReadyRaised</code> property. If the property is true then you can go ahead and use the plugin methods.</p> <p>The <code>FileEntry.fullPath</code> property will take the full file path to your folder or file and convert it to something that is more standard on both iOS and Android.</p> <div class="language- extra-class"><pre class="language-text"><code>/var/mobile/Applications/&lt;application UUID&gt;/Documents/path/to/file  (iOS)
/storage/emulated/0/path/to/file                                    (Android)

/path/to/file
</code></pre></div><p>The first two lines are the full path from the root of the file system.</p> <p>The bottom line is what will be saved in the <code>fullPath</code> property.</p> <p>If you need the full path from the root of the file system starting with <code>file:///</code> then you would use the <code>.toURL( )</code> method.</p> <h2 id="cdvfiles"><a href="#cdvfiles" aria-hidden="true" class="header-anchor">#</a> CDVFiles</h2> <p>When working with Cordova and internal files within your app, there is a special protocol that Cordova uses to keep things consistent across iOS and Android - <code>cdvfile</code>. Cdvfile paths look like this:</p> <div class="language- extra-class"><pre class="language-text"><code>cdvfile://localhost/persistent/path/to/file
</code></pre></div><p>Notice the <code>persistent</code> part of the path. This would become <code>temporary</code> if you used the alternate filesystem. You can convert other file paths to cdvfile paths by using the <code>toInternalURL( )</code> method on the FileEntry Object.</p> <p>The cdvfile paths are also supported by the <code>cordova-plugin-file-transfer</code> and <code>cordova-plugin-media</code> plugins.</p> <p>Be sure to add <code>cdvfile:</code> to your <code>default-src</code> in your Content-Security-Policy meta tag.</p> <p>In your config.xml file you also need to add <code>&lt;access origin=&quot;cdvfile://*&quot; /&gt;</code>.</p> <h2 id="file-plugin-error-codes"><a href="#file-plugin-error-codes" aria-hidden="true" class="header-anchor">#</a> File Plugin Error Codes</h2> <div class="language- extra-class"><pre class="language-text"><code>1	NOT_FOUND_ERR
2	SECURITY_ERR
3	ABORT_ERR
4	NOT_READABLE_ERR
5	ENCODING_ERR
6	NO_MODIFICATION_ALLOWED_ERR
7	INVALID_STATE_ERR
8	SYNTAX_ERR
9	INVALID_MODIFICATION_ERR
10	QUOTA_EXCEEDED_ERR
11	TYPE_MISMATCH_ERR
12	PATH_EXISTS_ERR
</code></pre></div><h2 id="temporary-or-persistent-filesystems"><a href="#temporary-or-persistent-filesystems" aria-hidden="true" class="header-anchor">#</a> Temporary or Persistent Filesystems</h2> <p>When you access the filesytem there are two versions - Temporary and Persistent. If you create folders or files with the Temporary version then the mobile device is allow to remove them if it needs the memory.</p> <p>When you create files that are Persistent then you are creating ones that need to be saved for the device to access at a later time or on another launch.</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">requestFileSystem</span><span class="token punctuation">(</span>LocalFileSystem<span class="token punctuation">.</span><span class="token constant">PERSISTENT</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">requestFileSystem</span><span class="token punctuation">(</span>LocalFileSystem<span class="token punctuation">.</span><span class="token constant">TEMPORARY</span><span class="token punctuation">,</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Usually when accessing the temporary filesystem you will want to specify how much space you will need for your files. The example above is requesting 5MB of space.</p> <h2 id="fileentry-objects"><a href="#fileentry-objects" aria-hidden="true" class="header-anchor">#</a> FileEntry Objects</h2> <p>The <code>FileEntry</code> object represents a file on the local filesystem. Once you have a reference to the filesystem and it's root folder then you can start to navigate the folders and create, write, read, or delete files.</p> <p>To get a <code>FileEntry</code> object you would normally start with the <code>getFile( )</code> method on a <code>DirEntry</code> object.</p> <div class="language-js extra-class"><pre class="language-js"><code>fs<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token string">&quot;someFile.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> create<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> exclusive<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The first parameter is the name of the file that you want to access (even if it does not exist yet). The second parameter are options about the request for the file. The most common parameter is <code>create</code>. This tells the filesystem if it should create the file if it does not exist yet. The exclusive parameter tells the filesystem if this file is only allowed to be accessed by the current app or if it may be shared across apps. The <code>ftw</code> parameter is the success callback function. The <code>wtf</code> parameter is the error callback function.</p> <h3 id="fileentry-properties"><a href="#fileentry-properties" aria-hidden="true" class="header-anchor">#</a> FileEntry Properties</h3> <p>Here are the properties that you can access for a <code>FileEntry</code> object.</p> <div class="language-js extra-class"><pre class="language-js"><code>fe<span class="token punctuation">.</span>isFile<span class="token punctuation">;</span> <span class="token comment">//Boolean</span>
fe<span class="token punctuation">.</span>isDirectory<span class="token punctuation">;</span> <span class="token comment">//Boolean</span>
fe<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">//String</span>
fe<span class="token punctuation">.</span>fullPath<span class="token punctuation">;</span> <span class="token comment">//String</span>
fe<span class="token punctuation">.</span>nativeURL<span class="token punctuation">;</span> <span class="token comment">//String</span>
fe<span class="token punctuation">.</span>filesystem<span class="token punctuation">;</span> <span class="token comment">//reference to containing filesystem</span>
</code></pre></div><h3 id="fileentry-methods"><a href="#fileentry-methods" aria-hidden="true" class="header-anchor">#</a> FileEntry Methods</h3> <p>Here are the methods that you can access from a <code>FileEntry</code> object.</p> <div class="language-js extra-class"><pre class="language-js"><code>fe<span class="token punctuation">.</span><span class="token function">toURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//returns String that usually starts with file:///</span>
fe<span class="token punctuation">.</span><span class="token function">toInternalURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//returns String that starts with cdvfile://localhost/</span>
fe<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//attempts to remove the file. Has success and error callbacks</span>
fe<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//attempts to get the parent directory</span>
fe<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> newName<span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//copy a file to a new folder with a new name</span>
fe<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> newName<span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//move a file to a new folder with a new name</span>
fe<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//get the size and modificationTime for a file</span>
fe<span class="token punctuation">.</span><span class="token function">setMetadata</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">,</span> metaObj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//update the meta info for a file</span>
fe<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//get a reference to a file to use with a FileReader</span>
fe<span class="token punctuation">.</span><span class="token function">createWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//create a writer to add data to a file. returns new FileWriter</span>
</code></pre></div><h2 id="directoryentry-objects"><a href="#directoryentry-objects" aria-hidden="true" class="header-anchor">#</a> DirectoryEntry Objects</h2> <p>The <code>DirectoryEntry</code> object represents a directory on the local filesystem. Very similar to the <code>FileEntry</code> object there are only a few different methods. Again, it requires you to have access to the filesystem.</p> <h3 id="directory-object-properties"><a href="#directory-object-properties" aria-hidden="true" class="header-anchor">#</a> Directory Object properties</h3> <p>These are the properties that you can access from a Directory object.</p> <div class="language-js extra-class"><pre class="language-js"><code>dir<span class="token punctuation">.</span>isFile<span class="token punctuation">;</span> <span class="token comment">//Boolean</span>
dir<span class="token punctuation">.</span>isDirectory<span class="token punctuation">;</span> <span class="token comment">//Boolean</span>
dir<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">//String directory name</span>
dir<span class="token punctuation">.</span>fullPath<span class="token punctuation">;</span> <span class="token comment">//String path and folder name from app root</span>
dir<span class="token punctuation">.</span>nativeURL<span class="token punctuation">;</span> <span class="token comment">//String path and folder name from OS filesystem root</span>
dir<span class="token punctuation">.</span>filesystem<span class="token punctuation">;</span> <span class="token comment">// reference to the filesystem used to open the directory</span>
</code></pre></div><h3 id="directory-object-methods"><a href="#directory-object-methods" aria-hidden="true" class="header-anchor">#</a> Directory Object methods</h3> <p>These are the methods that you can use from a Directory object.</p> <div class="language-js extra-class"><pre class="language-js"><code>dir<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> options<span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//get a reference to a directory</span>
dir<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> options<span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//get a reference to a file in the directory</span>
dir<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//move a folder to a new location</span>
dir<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//copy a folder to a new location</span>
dir<span class="token punctuation">.</span><span class="token function">toURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get the path to the folder starting with file:///</span>
dir<span class="token punctuation">.</span><span class="token function">toInternalURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get the path to the folder starting with cdvfile://localhost/</span>
dir<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//delete an empty folder.</span>
dir<span class="token punctuation">.</span><span class="token function">removeRecursively</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// remove a folder and all of its contents</span>
dir<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//get a reference to the containing folder</span>
dir<span class="token punctuation">.</span><span class="token function">createReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//read a file. returns new FileReader</span>
dir<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span><span class="token punctuation">;</span>
dir<span class="token punctuation">.</span><span class="token function">setMetadata</span><span class="token punctuation">(</span>ftw<span class="token punctuation">,</span> wtf<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="creating-text-files"><a href="#creating-text-files" aria-hidden="true" class="header-anchor">#</a> Creating Text Files</h2> <p>To create a file you need two things. First, access to the filesystem, and second, to choose if your file will be TEMPORARY or PERMANENT.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//to Create a PERMANENT file</span>

window<span class="token punctuation">.</span><span class="token function">requestFileSystem</span><span class="token punctuation">(</span>
  LocalFileSystem<span class="token punctuation">.</span><span class="token constant">PERSISTENT</span><span class="token punctuation">,</span>
  <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;file system open: &quot;</span> <span class="token operator">+</span> fs<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>
      <span class="token string">&quot;newPersistentFile.txt&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> create<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> exclusive<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span>fe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// fe is a fileEntry object. This is the main object that we will use.</span>
        <span class="token comment">// create will create the file if it does not already exist</span>
        <span class="token comment">// exclusive can make the file private to the app</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fileEntry is file?&quot;</span> <span class="token operator">+</span> fileEntry<span class="token punctuation">.</span>isFile<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// fileEntry.name == 'someFile.txt'</span>
        <span class="token comment">// fileEntry.fullPath == '/someFile.txt'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      onErrorCreateFile
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onErrorLoadFs
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//To create a TEMPORARY file we need to specify the amount of space for the file too</span>
window<span class="token punctuation">.</span><span class="token function">requestFileSystem</span><span class="token punctuation">(</span>
  window<span class="token punctuation">.</span><span class="token constant">TEMPORARY</span><span class="token punctuation">,</span>
  <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;file system open:&quot;</span><span class="token punctuation">,</span> fs<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> directoryObj <span class="token operator">=</span> fs<span class="token punctuation">.</span>root<span class="token punctuation">;</span>
    directoryObj<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>
      <span class="token string">&quot;newTempFile.txt&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> create<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> exclusive<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span>fileEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//temp file has been created</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      onErrorCreateFile
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">createFile</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>root<span class="token punctuation">,</span> <span class="token string">&quot;newTempFile.txt&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onErrorLoadFs
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="writing-to-a-file"><a href="#writing-to-a-file" aria-hidden="true" class="header-anchor">#</a> Writing to a File</h2> <p>To add content into a file we need to call the <code>.createWriter( )</code> method on a <code>fileEntry</code> object. It will return a <code>FileWriter</code> object that can be used to put data into the file.</p> <div class="language-js extra-class"><pre class="language-js"><code>fileEntry<span class="token punctuation">.</span><span class="token function">createWriter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>fileWriterObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fileWriterObj<span class="token punctuation">.</span><span class="token function-variable function">onwriteend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Successful file write...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//you can use the file now with its new data</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  fileWriterObj<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Failed file write:&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;doctype and more actual html...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">&quot;text/html&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  fileWriterObj<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you want to append text to an existing file, <a href="https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html#append-a-file-using-alternative-methods" target="_blank" rel="noopener noreferrer">use this example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="reading-from-a-file"><a href="#reading-from-a-file" aria-hidden="true" class="header-anchor">#</a> Reading from a File</h2> <p>If you want to read from a file you need to access the <code>.file</code> property of a <code>FileEntry</code> object. Then we need to create a <code>FileReader</code> object. The <code>readAsText( )</code> method needs to be called on the <code>FileReader</code> object and it needs to be passed the <code>file</code> property from the <code>fileEntry.file()</code> method.</p> <div class="language-js extra-class"><pre class="language-js"><code>fileEntry<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  reader<span class="token punctuation">.</span><span class="token function-variable function">onloadend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;File name: &quot;</span><span class="token punctuation">,</span> fileEntry<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;File Contents:&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  reader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> onErrorReadFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="binary-files"><a href="#binary-files" aria-hidden="true" class="header-anchor">#</a> Binary Files</h2> <p>To create or read a binary file the process is similar to the examples with the text files.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//download a file with fetch and save it to the filesystem</span>
<span class="token comment">//if you need to load a local file then you need to use XMLHttpRequest</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.example.com/image.png&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>blob <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//we have the binary file.</span>
    dirEntry<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>
      <span class="token string">&quot;image.png&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> create<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> exclusive<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span>fileEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fileEntry<span class="token punctuation">.</span><span class="token function">createWriter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>fileWriter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          fileWriter<span class="token punctuation">.</span><span class="token function-variable function">onwriteend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Successful file write...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">readBinaryFile</span><span class="token punctuation">(</span>fileEntry<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//see method below</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          fileWriter<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Failed file write: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          fileWriter<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      onErrorCreateFile
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//To read the binary file, use a method like this</span>
<span class="token keyword">function</span> <span class="token function">readBinaryFile</span><span class="token punctuation">(</span>fileEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fileEntry<span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    reader<span class="token punctuation">.</span><span class="token function-variable function">onloadend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;file name:&quot;</span><span class="token punctuation">,</span> fileEntry<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//image is ready to be used in the interface.</span>
      <span class="token keyword">let</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">&quot;image/png&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//this would give you the blob to work with, if you need that</span>
      <span class="token comment">//it can be passed to an HTML element with URL.createObjectURL( )</span>
      <span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;picture&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    reader<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> onErrorReadFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//An alternate (simpler) way of simply accessing a file to pass</span>
<span class="token comment">//to an HTML element is by with just a FileEntry object</span>
<span class="token comment">//this works if you know the path and filename</span>
fs<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>
  <span class="token string">&quot;image.png&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    create<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span>fileEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success function</span>
    <span class="token comment">// image.png file has been retrieved from root folder</span>
    <span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;img&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    img<span class="token punctuation">.</span>src <span class="token operator">=</span> fileEntry<span class="token punctuation">.</span><span class="token function">toInternalURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  wtf
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="creating-directories"><a href="#creating-directories" aria-hidden="true" class="header-anchor">#</a> Creating Directories</h2> <p>Directory entries are similar to file entries. We can only create them one at a time. The following code snippet will create a folder called 'myNewDir' and then a folder called 'images' inside it.</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">requestFileSystem</span><span class="token punctuation">(</span>LocalFileSystem<span class="token punctuation">.</span><span class="token constant">PERSISTENT</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fs<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span>
    <span class="token string">&quot;myNewDir&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> create<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>dirEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      dirEntry<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span>
        <span class="token string">&quot;images&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> create<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span>subDirEntry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">createFile</span><span class="token punctuation">(</span>subDirEntry<span class="token punctuation">,</span> <span class="token string">&quot;fileInNewSubDir.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        onErrorGetDir
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onErrorGetDir
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="references-and-resources"><a href="#references-and-resources" aria-hidden="true" class="header-anchor">#</a> References and Resources</h2> <p><a href="https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html" target="_blank" rel="noopener noreferrer">Cordova File plugin page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://developer.android.com/guide/topics/data/data-storage.html" target="_blank" rel="noopener noreferrer">File Storage on Android<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="return"><a href="#return" aria-hidden="true" class="header-anchor">#</a> Return</h2> <p><a href="/mad9022-w19/modules/week8/" class="router-link-active">Back to Week 8 Module Home</a></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: : </span> <span class="time">3/15/2019, 7:48:53 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/mad9022-w19/assets/js/108.68a584be.js" defer></script><script src="/mad9022-w19/assets/js/app.41454ee1.js" defer></script>
  </body>
</html>
