<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cordova and SQLite | MAD9022</title>
    <meta name="description" content="Cross-Platform App Development II">
    
    
    <link rel="preload" href="/mad9022-w19/assets/css/styles.41454ee1.css" as="style"><link rel="preload" href="/mad9022-w19/assets/js/app.41454ee1.js" as="script"><link rel="preload" href="/mad9022-w19/assets/js/116.80343209.js" as="script"><link rel="prefetch" href="/mad9022-w19/assets/css/11.styles.d1d0bc23.css"><link rel="prefetch" href="/mad9022-w19/assets/css/2.styles.50c0c95d.css"><link rel="prefetch" href="/mad9022-w19/assets/css/3.styles.75a33a02.css"><link rel="prefetch" href="/mad9022-w19/assets/css/4.styles.9b186081.css"><link rel="prefetch" href="/mad9022-w19/assets/css/5.styles.d720d12b.css"><link rel="prefetch" href="/mad9022-w19/assets/js/1.f3ac51dd.js"><link rel="prefetch" href="/mad9022-w19/assets/js/10.bfaf831a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/100.5a2f07bf.js"><link rel="prefetch" href="/mad9022-w19/assets/js/101.20b99668.js"><link rel="prefetch" href="/mad9022-w19/assets/js/102.6b0b57d0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/103.d4d127f9.js"><link rel="prefetch" href="/mad9022-w19/assets/js/104.379f5752.js"><link rel="prefetch" href="/mad9022-w19/assets/js/105.dc5026da.js"><link rel="prefetch" href="/mad9022-w19/assets/js/106.f2f81565.js"><link rel="prefetch" href="/mad9022-w19/assets/js/107.9ef2060c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/108.68a584be.js"><link rel="prefetch" href="/mad9022-w19/assets/js/109.fc887459.js"><link rel="prefetch" href="/mad9022-w19/assets/js/11.d1d0bc23.js"><link rel="prefetch" href="/mad9022-w19/assets/js/110.9888ca90.js"><link rel="prefetch" href="/mad9022-w19/assets/js/111.529b5195.js"><link rel="prefetch" href="/mad9022-w19/assets/js/112.c0e65e52.js"><link rel="prefetch" href="/mad9022-w19/assets/js/113.1b24d100.js"><link rel="prefetch" href="/mad9022-w19/assets/js/114.450077e3.js"><link rel="prefetch" href="/mad9022-w19/assets/js/115.0962e7b3.js"><link rel="prefetch" href="/mad9022-w19/assets/js/117.28d20708.js"><link rel="prefetch" href="/mad9022-w19/assets/js/118.e74c0443.js"><link rel="prefetch" href="/mad9022-w19/assets/js/119.40016a1d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/12.ab76b0bd.js"><link rel="prefetch" href="/mad9022-w19/assets/js/120.842cf0bd.js"><link rel="prefetch" href="/mad9022-w19/assets/js/121.6fa593a5.js"><link rel="prefetch" href="/mad9022-w19/assets/js/122.39055a61.js"><link rel="prefetch" href="/mad9022-w19/assets/js/13.fa2cca47.js"><link rel="prefetch" href="/mad9022-w19/assets/js/14.11d57462.js"><link rel="prefetch" href="/mad9022-w19/assets/js/15.7f7b62e1.js"><link rel="prefetch" href="/mad9022-w19/assets/js/16.1f434e79.js"><link rel="prefetch" href="/mad9022-w19/assets/js/17.341f564a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/18.b45827bb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/19.0fcd00e4.js"><link rel="prefetch" href="/mad9022-w19/assets/js/2.50c0c95d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/20.aedb17bc.js"><link rel="prefetch" href="/mad9022-w19/assets/js/21.d22dca94.js"><link rel="prefetch" href="/mad9022-w19/assets/js/22.4819435a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/23.6aae16b6.js"><link rel="prefetch" href="/mad9022-w19/assets/js/24.4873ca54.js"><link rel="prefetch" href="/mad9022-w19/assets/js/25.76a1627d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/26.bc4c279a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/27.eb1897ef.js"><link rel="prefetch" href="/mad9022-w19/assets/js/28.c0195e8a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/29.05b52044.js"><link rel="prefetch" href="/mad9022-w19/assets/js/3.75a33a02.js"><link rel="prefetch" href="/mad9022-w19/assets/js/30.edad0d75.js"><link rel="prefetch" href="/mad9022-w19/assets/js/31.39bcc518.js"><link rel="prefetch" href="/mad9022-w19/assets/js/32.e4f34273.js"><link rel="prefetch" href="/mad9022-w19/assets/js/33.fa19305b.js"><link rel="prefetch" href="/mad9022-w19/assets/js/34.ee009c6a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/35.4849b2d6.js"><link rel="prefetch" href="/mad9022-w19/assets/js/36.ce357d0d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/37.f41cd90d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/38.312b6743.js"><link rel="prefetch" href="/mad9022-w19/assets/js/39.9aa5c1ac.js"><link rel="prefetch" href="/mad9022-w19/assets/js/4.9b186081.js"><link rel="prefetch" href="/mad9022-w19/assets/js/40.830fc587.js"><link rel="prefetch" href="/mad9022-w19/assets/js/41.56bf3b7a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/42.73f8d4b1.js"><link rel="prefetch" href="/mad9022-w19/assets/js/43.98a6c1c8.js"><link rel="prefetch" href="/mad9022-w19/assets/js/44.3fb32089.js"><link rel="prefetch" href="/mad9022-w19/assets/js/45.e2172f70.js"><link rel="prefetch" href="/mad9022-w19/assets/js/46.a3014563.js"><link rel="prefetch" href="/mad9022-w19/assets/js/47.c0e20b50.js"><link rel="prefetch" href="/mad9022-w19/assets/js/48.51fe11b0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/49.30d655eb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/5.d720d12b.js"><link rel="prefetch" href="/mad9022-w19/assets/js/50.4ba7c331.js"><link rel="prefetch" href="/mad9022-w19/assets/js/51.3c1b266c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/52.1e4596e0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/53.1d3feae3.js"><link rel="prefetch" href="/mad9022-w19/assets/js/54.6b2f40cf.js"><link rel="prefetch" href="/mad9022-w19/assets/js/55.9c6bd9cb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/56.1082fd0e.js"><link rel="prefetch" href="/mad9022-w19/assets/js/57.cd051699.js"><link rel="prefetch" href="/mad9022-w19/assets/js/58.0959d73c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/59.96efe362.js"><link rel="prefetch" href="/mad9022-w19/assets/js/6.838d5a84.js"><link rel="prefetch" href="/mad9022-w19/assets/js/60.6bd0fd22.js"><link rel="prefetch" href="/mad9022-w19/assets/js/61.13a66fbb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/62.170d9996.js"><link rel="prefetch" href="/mad9022-w19/assets/js/63.881daa06.js"><link rel="prefetch" href="/mad9022-w19/assets/js/64.aab898a8.js"><link rel="prefetch" href="/mad9022-w19/assets/js/65.5664f45b.js"><link rel="prefetch" href="/mad9022-w19/assets/js/66.059a11d4.js"><link rel="prefetch" href="/mad9022-w19/assets/js/67.1f8b6d5a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/68.4f7da608.js"><link rel="prefetch" href="/mad9022-w19/assets/js/69.fbb52d02.js"><link rel="prefetch" href="/mad9022-w19/assets/js/7.43a1cfbb.js"><link rel="prefetch" href="/mad9022-w19/assets/js/70.7fa3da3c.js"><link rel="prefetch" href="/mad9022-w19/assets/js/71.795ceb35.js"><link rel="prefetch" href="/mad9022-w19/assets/js/72.1f6d56bf.js"><link rel="prefetch" href="/mad9022-w19/assets/js/73.0e0a654e.js"><link rel="prefetch" href="/mad9022-w19/assets/js/74.0e60e60a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/75.205be73d.js"><link rel="prefetch" href="/mad9022-w19/assets/js/76.1ae1f030.js"><link rel="prefetch" href="/mad9022-w19/assets/js/77.e72c7226.js"><link rel="prefetch" href="/mad9022-w19/assets/js/78.0cb60cc8.js"><link rel="prefetch" href="/mad9022-w19/assets/js/79.37c81eb7.js"><link rel="prefetch" href="/mad9022-w19/assets/js/8.e0a990e7.js"><link rel="prefetch" href="/mad9022-w19/assets/js/80.cd013a30.js"><link rel="prefetch" href="/mad9022-w19/assets/js/81.7895e895.js"><link rel="prefetch" href="/mad9022-w19/assets/js/82.6a1e1da4.js"><link rel="prefetch" href="/mad9022-w19/assets/js/83.e9ff3b07.js"><link rel="prefetch" href="/mad9022-w19/assets/js/84.21b918c0.js"><link rel="prefetch" href="/mad9022-w19/assets/js/85.b6427dea.js"><link rel="prefetch" href="/mad9022-w19/assets/js/86.f4c5c6f1.js"><link rel="prefetch" href="/mad9022-w19/assets/js/87.4f561d92.js"><link rel="prefetch" href="/mad9022-w19/assets/js/88.8d0daf32.js"><link rel="prefetch" href="/mad9022-w19/assets/js/89.890efde6.js"><link rel="prefetch" href="/mad9022-w19/assets/js/9.e9646124.js"><link rel="prefetch" href="/mad9022-w19/assets/js/90.928c223e.js"><link rel="prefetch" href="/mad9022-w19/assets/js/91.7fc7af62.js"><link rel="prefetch" href="/mad9022-w19/assets/js/92.f9849f8a.js"><link rel="prefetch" href="/mad9022-w19/assets/js/93.213ee155.js"><link rel="prefetch" href="/mad9022-w19/assets/js/94.0b0dde70.js"><link rel="prefetch" href="/mad9022-w19/assets/js/95.e0261c96.js"><link rel="prefetch" href="/mad9022-w19/assets/js/96.008cf034.js"><link rel="prefetch" href="/mad9022-w19/assets/js/97.ca853c16.js"><link rel="prefetch" href="/mad9022-w19/assets/js/98.471bf6b2.js"><link rel="prefetch" href="/mad9022-w19/assets/js/99.aeb61123.js">
    <link rel="stylesheet" href="/mad9022-w19/assets/css/11.styles.d1d0bc23.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/2.styles.50c0c95d.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/3.styles.75a33a02.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/4.styles.9b186081.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/5.styles.d720d12b.css"><link rel="stylesheet" href="/mad9022-w19/assets/css/styles.41454ee1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mad9022-w19/" class="home-link router-link-active"><!----> <span class="site-name">MAD9022</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mad9022-w19/overview/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/mad9022-w19/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/mad9022-w19/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mad9022-w19/overview/" class="nav-link">Overview</a></div><div class="nav-item"><a href="/mad9022-w19/assignments/" class="nav-link">Assignments</a></div><div class="nav-item"><a href="/mad9022-w19/resources/" class="nav-link">Resources</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>Introduction</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/mad9022-w19/overview/" class="sidebar-link">Overview</a></li><li><a href="/mad9022-w19/overview/course-section-information.html" class="sidebar-link">Course Section Information (CSI)</a></li><li><a href="/mad9022-w19/overview/contacts.html" class="sidebar-link">Contacts</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Content Modules</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Assignments</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="cordova-and-sqlite"><a href="#cordova-and-sqlite" aria-hidden="true" class="header-anchor">#</a> Cordova and SQLite</h1> <h2 id="saving-data-on-mobile-devices"><a href="#saving-data-on-mobile-devices" aria-hidden="true" class="header-anchor">#</a> Saving Data on Mobile Devices</h2> <p>Cordova takes advantage of the fact that mobile devices support SQLite in order to save data on the device.</p> <p>If you have worked with any other database then you will be able to work with SQLite. It uses the same basic SQL syntax to <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> or <code>SELECT</code> information. You can <code>CREATE</code>, <code>ALTER</code>, and <code>DROP</code> tables. You can even run transactions.</p> <p>So, the basic process for working with a SQLite database in Cordova is:</p> <ol><li>Open a database</li> <li>Create table(s) as desired.</li> <li>Start a transaction</li> <li>Insert data into your table(s)</li> <li>Select data from the table(s) to display</li> <li>Update data in the table(s) based on user input</li></ol> <p>You won't always have all these steps but these are the things you would normally encounter.</p> <h2 id="creating-a-database"><a href="#creating-a-database" aria-hidden="true" class="header-anchor">#</a> Creating a Database</h2> <p>So, before we can save or access any data, we need to create a database. In Cordova here is the basic script we would use to set up our database.</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;DOMContentLoaded&quot;</span><span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;deviceready&quot;</span><span class="token punctuation">,</span> onReady<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//or you can combine these two and just use the deviceready event</span>

<span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//ready to add click and tap listeners, etc.</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">onReady</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//ready to use Cordova plugin features</span>
  <span class="token keyword">let</span> db <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">openDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;myDb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Display Name&quot;</span><span class="token punctuation">,</span> <span class="token number">1024000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>openDatabase</code> will look to open the database and if it does not exist, then create it. It will check both the DB name and the version number.</p> <p>It takes four parameters - <code>( actual DB name, version number, DB display name, max size )</code></p> <p>Here is a codepen sample <a href="http://codepen.io/mad-d/pen/WwOVLE" target="_blank" rel="noopener noreferrer">working with SQLite/WebSQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="creating-a-database-table"><a href="#creating-a-database-table" aria-hidden="true" class="header-anchor">#</a> Creating a Database Table</h2> <p>Once you have a database object from the window.openDatabase method then we can create a table, if needed. <code>CREATE TABLE</code> is simply a SQL command like any other. It will be run with the <code>executeSQL( )</code> method on the transaction object.</p> <p>The database object will call its <code>transaction( )</code> method which takes three parameters. All three parameters are function calls. The first function is the one which contains all the steps in your transaction. The second is the error callback. The third is the success function. A transaction is a bundle of one or more SQL statements.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">onReady</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> db <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">openDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;myDb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span> <span class="token number">1024000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>doTrans<span class="token punctuation">,</span> successFunc<span class="token punctuation">,</span> errFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">doTrans</span><span class="token punctuation">(</span>trans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//trans is the variable that holds the transaction object</span>
  trans<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token string">&quot;CREATE TABLE IF NOT EXISTS stuff( id unique, info)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This would create a table called stuff, but only if it doesn't exist. The table would have two columns, one called id and the other called info. The id column values must be unique. The id column will be our primary key.</p> <h2 id="putting-data-into-a-table"><a href="#putting-data-into-a-table" aria-hidden="true" class="header-anchor">#</a> Putting Data into a Table</h2> <p>Once you have the table then you will want to add data to it. This step could be run the first time your app runs in order to put some default information into the table or it could happen after some interactions with the user.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doTrans</span><span class="token punctuation">(</span>trans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//trans is the variable that holds the transaction object</span>
  trans<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token string">&quot;CREATE TABLE IF NOT EXISTS stuff( id unique, info)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  trans<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token string">'INSERT INTO stuff(id, info) VALUES(1, &quot;Cheese&quot;)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  trans<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token string">'UPDATE stuff SET info=&quot;Apple Pie&quot; WHERE id=1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This would add a single row into the table and then alter the values in that row.</p> <p>See <a href="http://cordova.apache.org/docs/en/latest/cordova/storage/storage.html" target="_blank" rel="noopener noreferrer">this page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information on all of this.</p> <p>Also <a href="http://www.tutorialspoint.com/html5/html5_web_sql.htm" target="_blank" rel="noopener noreferrer">see tutorialspoint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for specific details on WebSQL.</p> <h2 id="retrieving-data-from-a-table"><a href="#retrieving-data-from-a-table" aria-hidden="true" class="header-anchor">#</a> Retrieving Data from a Table</h2> <p>Assuming that tables have been created and that they contain data, we want to retrieve a recordset that we can use in our Cordova app.</p> <p>While the previous examples are calling the executeSQL method with only one argument there are actually four parameters - SQL statement, container for results, success callback function, error callback function. The last three parameters are all optional.</p> <p>It is important to note that both transactions as well as the individual SQL statements both have success and failure callback functions.</p> <div class="language-js extra-class"><pre class="language-js"><code>trans<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM stuff&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> querySuccess<span class="token punctuation">,</span> transErr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">querySuccess</span><span class="token punctuation">(</span>trans<span class="token punctuation">,</span> results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//trans is the reference to the transaction</span>
  <span class="token comment">//results is the container for the SQL record set / SQLResultSetList</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>rows<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>insertId <span class="token operator">+</span> <span class="token string">&quot; is the id of the last inserted row&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    results<span class="token punctuation">.</span>rowsAffected <span class="token operator">+</span>
      <span class="token string">&quot; is the number of rows affected by an update or delete&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> results<span class="token punctuation">.</span>rows<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>rows<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//info is the column name</span>
    <span class="token comment">//item( i ) refers to a single row in our result set.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="specific-information-for-sqlite"><a href="#specific-information-for-sqlite" aria-hidden="true" class="header-anchor">#</a> Specific Information for SQLite</h2> <p>Since we are working with SQLite instead of MySQL it is probably helpful to have a few resources at hand.</p> <p><a href="http://www.sqlite.org/datatype3.html" target="_blank" rel="noopener noreferrer">This list<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is the list of datatypes available to us in SQLite for our table columns. Basically, we only have five datatypes to work with. Keep in mind that SQLite is a SIMPLE database. It is intended to be used as an embedded standalone database.</p> <div class="language- extra-class"><pre class="language-text"><code>NULL, TEXT, INTEGER, REAL, and BLOB are our five types. Everything fits into those five.

TEXT - all strings, dates, time values.

INTEGER - all numbers without decimal places.

REAL - all numbers with a decimal place.

BLOB - binary data like an image file.

NULL - is Null, empty, void, undefined, nothing, nada. You get the point.
</code></pre></div><p><strong>Note:</strong> If you have SQL commands from other databases for creating tables then SQLite will actually accept many more datatypes. However, internally it will convert them to the five types listed above.</p> <p><a href="http://www.sqlite.org/" target="_blank" rel="noopener noreferrer">main reference site for all information about SQLite<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>If you are looking for a bit more information about SQLite - <a href="http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html" target="_blank" rel="noopener noreferrer">here is a small tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="specifics-for-mobile-hybrid-apps"><a href="#specifics-for-mobile-hybrid-apps" aria-hidden="true" class="header-anchor">#</a> Specifics for Mobile Hybrid Apps</h2> <p>When working with Cordova we will use this plugin</p> <p><a href="https://www.npmjs.com/package/cordova-sqlite-storage" target="_blank" rel="noopener noreferrer">Cordova SQLite Storage plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>There are a few minor differences between the example code from above and the version with the plugin to run on Android and iOS.</p> <p>First is a modified version of the method to open or create the database.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> db <span class="token operator">=</span> window<span class="token punctuation">.</span>sqlitePlugin<span class="token punctuation">.</span><span class="token function">openDatabase</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;myDB&quot;</span><span class="token punctuation">,</span> iosDatabaseLocation<span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  successcb<span class="token punctuation">,</span>
  errorcb
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Second is the method to test if you were able to connect to the database.</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>sqlitePlugin<span class="token punctuation">.</span><span class="token function">echoTest</span><span class="token punctuation">(</span>successCallback<span class="token punctuation">,</span> errorCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Third is the ability to call queries directly on the DB object without wrapping it in a transaction.</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">executeSql</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM users&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> successCB<span class="token punctuation">,</span> errorCB<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <p>Here are some good links that will help you work with SQLite and WebSQL on iOS (and Android)</p> <p><a href="http://www.raymondcamden.com/index.cfm/2011/10/20/Example-of-PhoneGaps-Database-Support" target="_blank" rel="noopener noreferrer">Raymond Camden PhoneGap DB article 1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developer.apple.com/library/safari/documentation/iphone/conceptual/safarijsdatabaseguide/UsingtheJavascriptDatabase/UsingtheJavascriptDatabase.html#//apple_ref/doc/uid/TP40007256-CH3-XSW1" target="_blank" rel="noopener noreferrer">Apple Developer JS DB guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.raymondcamden.com/index.cfm/2013/8/14/Updating-PhoneGap-Databases" target="_blank" rel="noopener noreferrer">Raymond Camden Phonegap DB article 2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://css.dzone.com/articles/adding-database" target="_blank" rel="noopener noreferrer">DZone DB Reference<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="/mad9022-w19/modules/week9/sql-sample.html">Simple SQL Sample</a></p> <h2 id="return"><a href="#return" aria-hidden="true" class="header-anchor">#</a> Return</h2> <p><a href="/mad9022-w19/modules/week9/" class="router-link-active">Back to Week 9 Module Home</a></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: : </span> <span class="time">3/15/2019, 7:48:53 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/mad9022-w19/assets/js/116.80343209.js" defer></script><script src="/mad9022-w19/assets/js/app.41454ee1.js" defer></script>
  </body>
</html>
